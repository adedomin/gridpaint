/*! For license information please see index.bundle.js.LICENSE.txt */
(()=>{var t={681:function(t,e,i){var n;!function(r,o){"use strict";void 0===(n=function(){return function(t){var e,n,r=[];function o(t,e){t.super_=e,t.prototype=Object.create(e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}})}function s(t,e){Object.defineProperty(this,"kind",{value:t,enumerable:!0}),e&&e.length&&Object.defineProperty(this,"path",{value:e,enumerable:!0})}function a(t,e,i){a.super_.call(this,"E",t),Object.defineProperty(this,"lhs",{value:e,enumerable:!0}),Object.defineProperty(this,"rhs",{value:i,enumerable:!0})}function c(t,e){c.super_.call(this,"N",t),Object.defineProperty(this,"rhs",{value:e,enumerable:!0})}function l(t,e){l.super_.call(this,"D",t),Object.defineProperty(this,"lhs",{value:e,enumerable:!0})}function h(t,e,i){h.super_.call(this,"A",t),Object.defineProperty(this,"index",{value:e,enumerable:!0}),Object.defineProperty(this,"item",{value:i,enumerable:!0})}function u(t,e,i){var n=t.slice((i||e)+1||t.length);return t.length=e<0?t.length+e:e,t.push.apply(t,n),t}function d(t){var e=typeof t;return"object"!==e?e:t===Math?"math":null===t?"null":Array.isArray(t)?"array":"[object Date]"===Object.prototype.toString.call(t)?"date":void 0!==t.toString&&/^\/.*\//.test(t.toString())?"regexp":"object"}function f(e,i,n,r,o,s,p){var g=(o=o||[]).slice(0);if(void 0!==s){if(r){if("function"==typeof r&&r(g,s))return;if("object"==typeof r){if(r.prefilter&&r.prefilter(g,s))return;if(r.normalize){var v=r.normalize(g,s,e,i);v&&(e=v[0],i=v[1])}}}g.push(s)}"regexp"===d(e)&&"regexp"===d(i)&&(e=e.toString(),i=i.toString());var b=typeof e,y=typeof i;if("undefined"===b)"undefined"!==y&&n(new c(g,i));else if("undefined"===y)n(new l(g,e));else if(d(e)!==d(i))n(new a(g,e,i));else if("[object Date]"===Object.prototype.toString.call(e)&&"[object Date]"===Object.prototype.toString.call(i)&&e-i!=0)n(new a(g,e,i));else if("object"===b&&null!==e&&null!==i){if((p=p||[]).indexOf(e)<0){if(p.push(e),Array.isArray(e)){var w;for(e.length,w=0;w<e.length;w++)w>=i.length?n(new h(g,w,new l(t,e[w]))):f(e[w],i[w],n,r,g,w,p);for(;w<i.length;)n(new h(g,w,new c(t,i[w++])))}else{var m=Object.keys(e),x=Object.keys(i);m.forEach((function(o,s){var a=x.indexOf(o);a>=0?(f(e[o],i[o],n,r,g,o,p),x=u(x,a)):f(e[o],t,n,r,g,o,p)})),x.forEach((function(e){f(t,i[e],n,r,g,e,p)}))}p.length=p.length-1}}else e!==i&&("number"===b&&isNaN(e)&&isNaN(i)||n(new a(g,e,i)))}function p(e,i,n,r){return r=r||[],f(e,i,(function(t){t&&r.push(t)}),n),r.length?r:t}function g(t,e,i){if(i.path&&i.path.length){var n,r=t[e],o=i.path.length-1;for(n=0;n<o;n++)r=r[i.path[n]];switch(i.kind){case"A":g(r[i.path[n]],i.index,i.item);break;case"D":delete r[i.path[n]];break;case"E":case"N":r[i.path[n]]=i.rhs}}else switch(i.kind){case"A":g(t[e],i.index,i.item);break;case"D":t=u(t,e);break;case"E":case"N":t[e]=i.rhs}return t}function v(t,e,i){if(t&&e&&i&&i.kind){for(var n=t,r=-1,o=i.path?i.path.length-1:0;++r<o;)void 0===n[i.path[r]]&&(n[i.path[r]]="number"==typeof i.path[r]?[]:{}),n=n[i.path[r]];switch(i.kind){case"A":g(i.path?n[i.path[r]]:n,i.index,i.item);break;case"D":delete n[i.path[r]];break;case"E":case"N":n[i.path[r]]=i.rhs}}}function b(t,e,i){if(i.path&&i.path.length){var n,r=t[e],o=i.path.length-1;for(n=0;n<o;n++)r=r[i.path[n]];switch(i.kind){case"A":b(r[i.path[n]],i.index,i.item);break;case"D":case"E":r[i.path[n]]=i.lhs;break;case"N":delete r[i.path[n]]}}else switch(i.kind){case"A":b(t[e],i.index,i.item);break;case"D":case"E":t[e]=i.lhs;break;case"N":t=u(t,e)}return t}return e="object"==typeof i.g&&i.g?i.g:"undefined"!=typeof window?window:{},(n=e.DeepDiff)&&r.push((function(){void 0!==n&&e.DeepDiff===p&&(e.DeepDiff=n,n=t)})),o(a,s),o(c,s),o(l,s),o(h,s),Object.defineProperties(p,{diff:{value:p,enumerable:!0},observableDiff:{value:f,enumerable:!0},applyDiff:{value:function(t,e,i){t&&e&&f(t,e,(function(n){i&&!i(t,e,n)||v(t,e,n)}))},enumerable:!0},applyChange:{value:v,enumerable:!0},revertChange:{value:function(t,e,i){if(t&&e&&i&&i.kind){var n,r,o=t;for(r=i.path.length-1,n=0;n<r;n++)void 0===o[i.path[n]]&&(o[i.path[n]]={}),o=o[i.path[n]];switch(i.kind){case"A":b(o[i.path[n]],i.index,i.item);break;case"D":case"E":o[i.path[n]]=i.lhs;break;case"N":delete o[i.path[n]]}}},enumerable:!0},isConflict:{value:function(){return void 0!==n},enumerable:!0},noConflict:{value:function(){return r&&(r.forEach((function(t){t()})),r=null),p},enumerable:!0}}),p}()}.apply(e,[]))||(t.exports=n)}()},598:function(t,e,i){var n,r=r||function(t){"use strict";if(!(void 0===t||"undefined"!=typeof navigator&&/MSIE [1-9]\./.test(navigator.userAgent))){var e=t.document,i=function(){return t.URL||t.webkitURL||t},n=e.createElementNS("http://www.w3.org/1999/xhtml","a"),r="download"in n,o=/constructor/i.test(t.HTMLElement)||t.safari,s=/CriOS\/[\d]+/.test(navigator.userAgent),a=function(e){(t.setImmediate||t.setTimeout)((function(){throw e}),0)},c=function(t){setTimeout((function(){"string"==typeof t?i().revokeObjectURL(t):t.remove()}),4e4)},l=function(t){return/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(t.type)?new Blob([String.fromCharCode(65279),t],{type:t.type}):t},h=function(e,h,u){u||(e=l(e));var d,f=this,p="application/octet-stream"===e.type,g=function(){!function(t,e,i){for(var n=(e=[].concat(e)).length;n--;){var r=t["on"+e[n]];if("function"==typeof r)try{r.call(t,t)}catch(t){a(t)}}}(f,"writestart progress write writeend".split(" "))};if(f.readyState=f.INIT,r)return d=i().createObjectURL(e),void setTimeout((function(){var t,e;n.href=d,n.download=h,t=n,e=new MouseEvent("click"),t.dispatchEvent(e),g(),c(d),f.readyState=f.DONE}));!function(){if((s||p&&o)&&t.FileReader){var n=new FileReader;return n.onloadend=function(){var e=s?n.result:n.result.replace(/^data:[^;]*;/,"data:attachment/file;");t.open(e,"_blank")||(t.location.href=e),e=void 0,f.readyState=f.DONE,g()},n.readAsDataURL(e),void(f.readyState=f.INIT)}d||(d=i().createObjectURL(e)),p?t.location.href=d:t.open(d,"_blank")||(t.location.href=d),f.readyState=f.DONE,g(),c(d)}()},u=h.prototype;return"undefined"!=typeof navigator&&navigator.msSaveOrOpenBlob?function(t,e,i){return e=e||t.name||"download",i||(t=l(t)),navigator.msSaveOrOpenBlob(t,e)}:(u.abort=function(){},u.readyState=u.INIT=0,u.WRITING=1,u.DONE=2,u.error=u.onwritestart=u.onprogress=u.onwrite=u.onabort=u.onerror=u.onwriteend=null,function(t,e,i){return new h(t,e||t.name||"download",i)})}}("undefined"!=typeof self&&self||"undefined"!=typeof window&&window||this.content);t.exports?t.exports.saveAs=r:null!==i.amdD&&null!==i.amdO&&(void 0===(n=function(){return r}.call(e,i,e,t))||(t.exports=n))},492:function(t,e,i){"use strict";var n=this&&this.__createBinding||(Object.create?function(t,e,i,n){void 0===n&&(n=i),Object.defineProperty(t,n,{enumerable:!0,get:function(){return e[i]}})}:function(t,e,i,n){void 0===n&&(n=i),t[n]=e[i]}),r=this&&this.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),o=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var i in t)"default"!==i&&Object.prototype.hasOwnProperty.call(t,i)&&n(e,t,i);return r(e,t),e};Object.defineProperty(e,"__esModule",{value:!0}),e.GridPaint=void 0;const s=i(425),a=o(i(807)),c=o(i(152)),l=i(143),h=o(i(526)),u=o(i(522)),d=i(199),f=["transparent","#fff","#c0c0c0","#808080","#000","#f00","#800","#ff0","#808000","#0f0","#080","#0ff","#008080","#00f","#000080","#f0f","#800080"],p=16;e.GridPaint=class{constructor(t){this.width=p,this.height=p,this.cellWidth=p,this.cellHeight=p,this.origCellW=p,this.origCellH=p,this.background=!0,this.grid=!1,this.outline=!1,this.isApplied=!1,this.drawing=!1,this.colour=0,this.gridColour="#000",this.palette=f,this.cursor={x:-1,y:-1},this.painting=[[]],this.oldPainting=[[]],this.redoHistory=[],this.undoHistory=[],this.tool="pencil",this.bucket=h.bucket,this.clear=h.clear,this.pencil=h.pencil,this.line=h.line,this.redo=h.redo,this.undo=h.undo,this.applyTool=h.apply,this.line_approx=h.line_approx,this.replace=h.replace,this.compareChanges=h.compare,this.drawBackground=a.background,this.drawCursor=a.cursor,this.drawGrid=a.grid,this.drawPainting=a.painting,this.draw=a.tick,this.saveAs=l.save,this.attachHandlers=c.attach,this.detachHandlers=c.detach,this.resize=u.resize,this.fitToWindow=u.fitToWindow,void 0!==t.width&&(this.width=t.width),void 0!==t.height&&(this.height=t.height),void 0!==t.cellWidth&&(this.cellWidth=t.cellWidth),void 0!==t.cellHeight&&(this.cellHeight=t.cellHeight),void 0!==t.outline&&(this.outline=t.outline),void 0!==t.palette&&t.palette.length>0&&(this.palette=t.palette),this.canvas=s.Canvas(this.width*this.cellWidth,this.height*this.cellHeight);const e=this.canvas.getContext("2d");if(null===e)throw new Error("Could not get 2d context");this.ctx=e,this.events=c.Handlers(this),this.resizeEvent=this.fitToWindow.bind(this),d.isBrowser&&(this.canvas.className="gridpaint-canvas",this.canvas.style.cursor="crosshair",this.canvas.style.touchAction="none",/firefox/i.test(navigator.userAgent)?this.canvas.style.imageRendering="-moz-crisp-edges":this.canvas.style.imageRendering="pixelated",this.outline&&(this.canvas.style.outlineStyle="solid",this.canvas.style.outlineWidth="2px")),this.boundDraw=this.draw.bind(this),this.clear(!0)}init(){this.attachHandlers(),this.fitToWindow(),this.draw()}destroy(){this.detachHandlers(),this.drawing=!1}setTool(t){this.tool=t,this.line(!0)}action(){switch(this.tool){case"pencil":return this.pencil();case"bucket":return this.bucket();case"line":return this.line();default:console.error("<GridPaint>#action() warning: Unknown tool selected: "+this.tool)}}singleAction(t){switch(this.line(!0),t){case"undo":return this.undo();case"redo":return this.redo();case"clear":return this.clear();default:console.error("<GridPaint>#singleAction() warning: Unknown tool to invoke: "+t)}}}},199:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.isBrowser=void 0;let i=!1;e.isBrowser=i,("undefined"==typeof process||"browser"===(null===process||void 0===process?void 0:process.title))&&(e.isBrowser=i=!0)},783:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.bucket=void 0,e.bucket=function(t,e,i){const n=this.colour;e=void 0!==e?e:this.cursor.x,i=void 0!==i?i:this.cursor.y,(t=void 0!==t?t:this.painting[i][e])!==n&&this.painting[i][e]===t&&(this.painting[i][e]=n,i+1<this.height&&this.bucket(t,e,i+1),i-1>-1&&this.bucket(t,e,i-1),e+1<this.width&&this.bucket(t,e+1,i),e-1>-1&&this.bucket(t,e-1,i))}},425:function(t,e,i){"use strict";var n=this&&this.__createBinding||(Object.create?function(t,e,i,n){void 0===n&&(n=i),Object.defineProperty(t,n,{enumerable:!0,get:function(){return e[i]}})}:function(t,e,i,n){void 0===n&&(n=i),t[n]=e[i]}),r=this&&this.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),o=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var i in t)"default"!==i&&Object.prototype.hasOwnProperty.call(t,i)&&n(e,t,i);return r(e,t),e};Object.defineProperty(e,"__esModule",{value:!0}),e.Canvas=void 0;const s=o(i(436)),a=i(199);let c;e.Canvas=c,a.isBrowser?e.Canvas=c=function(t,e){const i=document.createElement("canvas");return i.width=t||300,i.height=e||150,i}:e.Canvas=c=function(t,e){return s.make(t||300,e||150)}},329:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.clear=void 0,e.clear=function(t=!1){this.oldPainting=this.painting.splice(0,this.painting.length);for(let t=0;t<this.height;++t){this.painting.push([]);for(let e=0;e<this.width;++e)this.painting[t].push(0)}t&&(this.oldPainting=this.painting),this.line(!0),this.compareChanges()}},807:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.tick=e.painting=e.grid=e.cursor=e.background=void 0,e.background=function(){let t=!1;const e=this.cellWidth,i=this.cellHeight;for(let n=0;n<2*this.width;n+=1){for(let r=0;r<2*this.height;r+=1)this.ctx.fillStyle=t?"#999999":"#666666",this.ctx.fillRect(n*(e/2),r*(i/2),e/2,i/2),t=!t;t=!t}},e.cursor=function(){if(this.cursor.x<0||this.cursor.y<0)return;const t=this.cellWidth,e=this.cellHeight;for(const{x:i,y:n}of this.line_approx(this.cursor.x,this.cursor.y))this.ctx.globalAlpha=.8,this.ctx.fillStyle=this.palette[this.colour],this.ctx.fillRect(i*t+t/4,n*e,t/2,e),this.ctx.fillRect(i*t,n*e+e/4,t,e/2),this.ctx.globalAlpha=1},e.grid=function(){const t=this.cellWidth,e=this.cellHeight;this.ctx.strokeStyle=this.gridColour;for(let i=0;i<this.width;i+=1)this.ctx.beginPath(),this.ctx.moveTo(i*t+.5,0),this.ctx.lineTo(i*t+.5,e*this.height),this.ctx.stroke();for(let i=0;i<this.height;i+=1)this.ctx.beginPath(),this.ctx.moveTo(0,i*e+.5),this.ctx.lineTo(t*this.width,i*e+.5),this.ctx.stroke()},e.painting=function(t=1,e){var i;const n=this.cellWidth,r=this.cellHeight,o=null!=e?e:this.ctx;for(let e=0;e<this.height;e+=1)for(let s=0;s<this.width;s+=1)o.fillStyle=null!==(i=this.palette[this.painting[e][s]])&&void 0!==i?i:"rgba(0,0,0,0)",o.fillRect(s*n*t,e*r*t,n*t,r*t)},e.tick=function(){this.background?this.drawBackground():this.ctx.clearRect(0,0,this.canvas.width,this.canvas.height),this.drawPainting(),this.drawCursor(),this.grid&&this.drawGrid(),this.drawing&&window.requestAnimationFrame(this.boundDraw)}},152:(t,e,i)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.detach=e.attach=e.Handlers=void 0;const n=i(199);function r(t){const e=this.width,i=this.height,n=this.cellWidth,r=this.cellHeight,o=this.canvas.getBoundingClientRect(),s=t.pageX-o.left-window.scrollX,a=t.pageY-o.top-window.scrollY;this.cursor.x=Math.floor(s/e*(e/n)),this.cursor.y=Math.floor(a/i*(i/r))}e.Handlers=function(t){const e=t.action.bind(t),i=t.applyTool.bind(t),n=t.compareChanges.bind(t),o=t.draw.bind(t),s=r.bind(t);return{pointermove(i){i.preventDefault(),s(i),t.isApplied&&e()},pointerdown(e){var n;0===e.button&&(s(e),t.oldPainting=(n=t.painting,JSON.parse(JSON.stringify(n))),i(!0))},pointerup(e){0===e.button&&t.isApplied&&(i(!1),n())},pointerenter(){t.drawing||(t.drawing=!0,o())},pointerout(){t.drawing=!1}}},e.attach=function(){n.isBrowser&&(Object.keys(this.events).forEach((t=>{this.canvas.addEventListener(t,this.events[t],!1)})),window.addEventListener("pointerup",this.events.pointerup,!1),window.addEventListener("resize",this.resizeEvent,!1))},e.detach=function(){n.isBrowser&&(Object.keys(this.events).forEach((t=>{this.canvas.removeEventListener(t,this.events[t],!1)})),window.removeEventListener("pointerup",this.events.pointerup,!1),window.removeEventListener("resize",this.resizeEvent,!1))}},105:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.line=e.line_approx=void 0;const i={x:-1,y:-1};function n(){return-1===i.x||-1===i.y}function r(t=-1,e=-1){i.x=t,i.y=e}function*o(t,e){if(n())yield{x:t,y:e};else{let n=i.x,r=i.y;const o=t,s=e,a=Math.abs(o-n),c=Math.abs(s-r),l=n<o?1:-1,h=r<s?1:-1;let u=a-c;for(;n!==o||r!==s;){yield{x:n,y:r};const t=u<<1;t>-c&&(u-=c,n+=l),t<a&&(u+=a,r+=h)}yield{x:n,y:r}}}e.line_approx=o,e.line=function(t){if(t)return r();if(n())r(this.cursor.x,this.cursor.y);else{for(const{x:t,y:e}of o(this.cursor.x,this.cursor.y))this.painting[e][t]=this.colour;r()}}},324:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.replace=void 0,e.replace=function(t,e){if(t!==e){"string"==typeof t&&(t=this.palette.indexOf(t)),"string"==typeof e&&(e=this.palette.indexOf(e)),this.oldPainting=this.painting.splice(0,this.painting.length);for(let i=0;i<this.height;i+=1){this.painting.push([]);for(let n=0;n<this.width;n+=1){const r=this.oldPainting[i][n];this.painting[i].push(r===t?e:r)}}this.compareChanges()}}},522:(t,e,i)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.fitToWindow=e.resize=void 0;const n=i(199);e.resize=function(t=0,e=0){this.canvas.width=this.width*(t||this.cellWidth),this.canvas.height=this.height*(e||this.cellHeight),this.cellWidth=t||this.cellWidth,this.cellHeight=e||this.cellHeight},e.fitToWindow=function(){if(!n.isBrowser)return;if(!this.canvas.parentElement)return;const t=this.origCellW*this.width,e=this.cellWidth/this.cellHeight,i=this.canvas.parentElement.clientWidth,r=this.canvas.width;if(r>i){const t=i/this.width,n=t/e;this.resize(t,n)}else if(r<t&&i<t){const t=i/this.width,n=t/e;this.resize(t,n)}else t>r&&t<i&&this.resize(this.origCellW,this.origCellH);this.drawing||this.draw()}},143:function(t,e,i){"use strict";var n=this&&this.__createBinding||(Object.create?function(t,e,i,n){void 0===n&&(n=i),Object.defineProperty(t,n,{enumerable:!0,get:function(){return e[i]}})}:function(t,e,i,n){void 0===n&&(n=i),t[n]=e[i]}),r=this&&this.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),o=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var i in t)"default"!==i&&Object.prototype.hasOwnProperty.call(t,i)&&n(e,t,i);return r(e,t),e},s=this&&this.__awaiter||function(t,e,i,n){return new(i||(i=Promise))((function(r,o){function s(t){try{c(n.next(t))}catch(t){o(t)}}function a(t){try{c(n.throw(t))}catch(t){o(t)}}function c(t){var e;t.done?r(t.value):(e=t.value,e instanceof i?e:new i((function(t){t(e)}))).then(s,a)}c((n=n.apply(t,e||[])).next())}))};Object.defineProperty(e,"__esModule",{value:!0}),e.save=void 0;const a=o(i(598)),c=i(425),l=i(791),h=o(i(436)),u=i(199);e.save=function(t,e=1){const i=c.Canvas(this.width*this.cellWidth,this.height*this.cellHeight),n=i.getContext("2d");return null===n?(console.error("<GridPaint>#save() -> Could not get 2d Context."),Promise.reject("<GridPaint>#save() -> Could not get 2d Context.")):(t=null!=t?t:"painting.png",this.drawPainting(e,n),u.isBrowser?":blob:"===t?new Promise((t=>{i.toBlob((e=>{t(e)}),"image/png")})):(i.toBlob((e=>{if(null===e)return console.error("<GridPaint>#save() -> Blob should not be null!"),Promise.reject("<GridPaint>#save() -> Blob should not be null!");a.saveAs(e,t)})),Promise.resolve(null)):function(t){return s(this,void 0,void 0,(function*(){const e=new l.PassThrough,i=[];return e.on("data",(t=>i.push(t))),e.once("end",(function(){})),yield h.encodePNGToStream(t,e),Buffer.concat(i)}))}(n.bitmap))}},526:function(t,e,i){"use strict";var n=this&&this.__createBinding||(Object.create?function(t,e,i,n){void 0===n&&(n=i),Object.defineProperty(t,n,{enumerable:!0,get:function(){return e[i]}})}:function(t,e,i,n){void 0===n&&(n=i),t[n]=e[i]}),r=this&&this.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),o=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var i in t)"default"!==i&&Object.prototype.hasOwnProperty.call(t,i)&&n(e,t,i);return r(e,t),e};Object.defineProperty(e,"__esModule",{value:!0}),e.line_approx=e.compare=e.replace=e.apply=e.clear=e.undo=e.redo=e.line=e.bucket=e.pencil=void 0;const s=o(i(681)),a=i(783);Object.defineProperty(e,"bucket",{enumerable:!0,get:function(){return a.bucket}});const c=i(329);Object.defineProperty(e,"clear",{enumerable:!0,get:function(){return c.clear}});const l=i(324);Object.defineProperty(e,"replace",{enumerable:!0,get:function(){return l.replace}});const h=i(105);function u(t,e,i){if(!t.length)return;const n=t.pop();var r;e.push((r=n,JSON.parse(JSON.stringify(r)))),n&&n.forEach((t=>{i(this.painting,this.painting,t)}))}Object.defineProperty(e,"line",{enumerable:!0,get:function(){return h.line}}),Object.defineProperty(e,"line_approx",{enumerable:!0,get:function(){return h.line_approx}}),e.apply=function(t){this.isApplied=void 0!==t?t:!this.isApplied,this.isApplied&&this.action()},e.compare=function(){let t=s.diff(this.oldPainting,this.painting);t&&(t=t.filter((function(t){return"E"===t.kind})),t.length&&(this.undoHistory.push(t),this.undoHistory.splice(0,this.undoHistory.length-99),this.redoHistory.length=0))},e.pencil=function(){const t=this.cursor.x,e=this.cursor.y;t>=0&&t<this.width&&e>=0&&e<this.height&&(this.painting[e][t]=this.colour)},e.redo=function(){u.apply(this,[this.redoHistory,this.undoHistory,s.applyChange])},e.undo=function(){u.apply(this,[this.undoHistory,this.redoHistory,s.revertChange])}},436:()=>{},791:()=>{}},e={};function i(n){if(e[n])return e[n].exports;var r=e[n]={exports:{}};return t[n].call(r.exports,r,r.exports,i),r.exports}i.amdD=function(){throw new Error("define cannot be used indirect")},i.amdO={},i.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"==typeof window)return window}}(),(()=>{"use strict";const{GridPaint:t}=i(492),e=new t({width:40,height:20});let n,r,o,s,a;document.body.appendChild(e.canvas),n=document.createElement("div"),n.style.marginBottom="6px",e.palette.forEach((function(t,i){const r=document.createElement("button");"transparent"!==t?r.style.backgroundColor=t:(r.style.backgroundImage="\n          linear-gradient(45deg, #999 25%, transparent 25%, transparent 75%, #999 75%, #999 100%),\n          linear-gradient(-45deg, #999 25%, #666 25%, #666 75%, #999 75%, #999 100%)\n        ",r.style.backgroundSize="0.5em 0.5em"),r.style.border="1px solid #000",r.style.marginRight="4px",r.style.color="white",r.innerText=" ",r.title="switch to "+t,r.onclick=function(){e.colour=i,e.drawing||e.draw()},n.appendChild(r)})),document.body.appendChild(n),n=document.createElement("div"),r=["pencil","line","bucket","undo","redo","clear","saveAs"],r.forEach((function(t){const i=document.createElement("button");i.innerText=t,i.onclick=function(){switch(t){case"pencil":case"line":case"bucket":e.setTool(t);break;case"undo":case"redo":case"clear":e.singleAction(t),e.drawing||e.draw();break;case"saveAs":e.saveAs()}},n.appendChild(i)})),document.body.appendChild(n),n=document.createElement("div"),o=document.createElement("select"),s=document.createElement("select"),a=document.createElement("button"),a.innerText="replace",a.onclick=function(){const t=document.getElementsByTagName("select");e.replace(t[0].value,t[1].value),e.drawing||e.draw()},e.palette.forEach((function(t){const e=new Option(t),i=new Option(t);e.style.backgroundColor=t,i.style.backgroundColor=t,o.appendChild(e),s.appendChild(i)})),n.appendChild(o),n.appendChild(s),n.appendChild(a),document.body.appendChild(n),e.init()})()})();